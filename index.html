<!DOCTYPE html>

<html>
<head>
    <title>Chatbox</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/additional-methods.min.js"></script>
    <style>
        #chatbox {
            width: 500px;
            height: 400px;
            border: 1px solid #ccc;
            margin: 10px auto;
            padding: 10px;
        }

        #chatbox .message {
            margin-bottom: 10px;
        }

        #chatbox .message .user {
            font-weight: bold;
        }

        #chatbox .message .text {
            font-style: italic;
        }

        #chatbox form {
            margin-top: 10px;
        }

        #chatbox input[type="text"] {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
        }

        #chatbox input[type="submit"] {
            padding: 5px 10px;
            background-color: #ccc;
            border: none;
            cursor: pointer;
        }

    </style>
</head>
<body>

    <div id="chatbox">

    </div>

    <form id="chatForm" action="" method="post">
        <input type="text" name="message" id="message" placeholder="Type your message here..." /> 
        <input type="submit" value="Send" /> 
    </form>

    <script type="text/javascript">

        $(document).ready(function() {

            // Get the chat history from the database and display it in the chatbox 
            $.ajax({ 
                url : 'getChatHistory.php',  // URL to get the chat history from the database 
                type : 'GET',  // Method used to get the data 
                success : function(data) {  // Function to be executed if the request succeeds 

                    // Append the chat history to the chatbox 
                    $('#chatbox').append(data); 

                } 

            }); 

            // Submit the form when the user presses enter or clicks on the send button 
            $('#chatForm').submit(function(e) { 

                e.preventDefault(); // Prevent the form from being submitted 

                // Get the message from the input field 
                var message = $('#message').val(); 

                // Make an AJAX request to get a response from StarkAI using GET method  
                $.ajax({ 

                    url : 'starkai.live/sydney/chat/message/' + message, // URL to get a response from StarkAI  
                    type : 'GET', // Method used to get a response from StarkAI  

                    success : function(data) { // Function to be executed if the request succeeds  

                        // Append the response to the chatbox  
                        $('#chatbox').append('<div class="message"><span class="user">You</span>: <span class="text">' + message + '</span></div><div class="message"><span class="user">StarkAI</span>: <span class="text">' + data + '</span></div>');  

                        // Clear the input field  
                        $('#message').val('');  

                        // Save the chat history in the database  
                        $.ajax({  

                            url : 'saveChatHistory.php', // URL to save the chat history in the database  
                            type : 'POST', // Method used to save the data in the database  
                            data : { message : message, response : data }, // Data to be saved in the database  

                            success : function(data) { // Function to be executed if the request succeeds  

                                console.log('Chat history saved successfully!');  

                            }  

                        });  

                    }  

                });  

            });  

        });  

    </script>    																																																		     </body>     </html>
